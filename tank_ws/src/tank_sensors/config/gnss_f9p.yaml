# ZED-F9P GNSS Configuration for Tank Navigation
# Using aussierobots/ublox_dgnss driver
# UBX-style configuration parameters

ublox_dgnss_node:
  ros__parameters:
    # Serial device
    device: "/dev/ttyACM1"
    baudrate: 115200  # Standard for F9P USB
    
    # Device identification
    DEVICE_FAMILY: "F9P"
    FRAME_ID: "gnss"
    
    # Message output configuration (1 = publish, 0 = disabled)
    # NAV-PVT: Position, Velocity, Time solution
    CFG_MSGOUT_UBX_NAV_PVT_USB: 1
    
    # NAV-HP-POS-LLH: High-precision Lat/Lon/Height
    CFG_MSGOUT_UBX_NAV_HPPOSLLH_USB: 1
    
    # NAV-COV: Covariance (for EKF fusion)
    CFG_MSGOUT_UBX_NAV_COV_USB: 1
    
    # NAV-DOP: Dilution of Precision (IMPORTANT for path planning)
    CFG_MSGOUT_UBX_NAV_DOP_USB: 1
    
    # NAV-STATUS: Fix quality status
    CFG_MSGOUT_UBX_NAV_STATUS_USB: 1
    
    # NAV-SAT: Satellite information
    CFG_MSGOUT_UBX_NAV_SAT_USB: 1
    
    # NAV-SIG: Signal information
    CFG_MSGOUT_UBX_NAV_SIG_USB: 1
    
    # Update rate (milliseconds between measurements)
    # 200ms = 5 Hz (good balance for ground vehicle)
    CFG_RATE_MEAS: 200
    CFG_RATE_NAV: 1  # Navigation solution every measurement
    CFG_RATE_TIMEREF: 0  # UTC time
    
    # Enable GNSS constellations (all for best accuracy)
    CFG_SIGNAL_GPS_ENA: 1        # GPS
    CFG_SIGNAL_GPS_L1CA_ENA: 1   # GPS L1 C/A
    CFG_SIGNAL_GPS_L2C_ENA: 1    # GPS L2C
    
    CFG_SIGNAL_GAL_ENA: 1        # Galileo
    CFG_SIGNAL_GAL_E1_ENA: 1     # Galileo E1
    CFG_SIGNAL_GAL_E5B_ENA: 1    # Galileo E5b
    
    CFG_SIGNAL_GLO_ENA: 1        # GLONASS
    CFG_SIGNAL_GLO_L1_ENA: 1     # GLONASS L1
    CFG_SIGNAL_GLO_L2_ENA: 1     # GLONASS L2
    
    CFG_SIGNAL_BDS_ENA: 1        # BeiDou
    CFG_SIGNAL_BDS_B1_ENA: 1     # BeiDou B1I
    CFG_SIGNAL_BDS_B2_ENA: 1     # BeiDou B2I
    
    CFG_SIGNAL_QZSS_ENA: 1       # QZSS (regional, Japan/Asia-Pacific)
    CFG_SIGNAL_QZSS_L1CA_ENA: 1
    CFG_SIGNAL_QZSS_L2C_ENA: 1
    
    # SBAS (Satellite-Based Augmentation - WAAS/EGNOS)
    CFG_SIGNAL_SBAS_ENA: 1
    CFG_SIGNAL_SBAS_L1CA_ENA: 1
    
    # Dynamic platform model
    # 4 = Automotive (for ground vehicles, <84 m/s)
    CFG_NAVSPG_DYNMODEL: 4
    
    # Fix mode: 0 = 2D/3D auto
    CFG_NAVSPG_FIXMODE: 0
    
    # USB protocol output (enable both for compatibility)
    CFG_USBOUTPROT_NMEA: 1
    CFG_USBOUTPROT_UBX: 1
    
    # Disable info messages
    CFG_INFMSG_UBX_USB: 0
    CFG_INFMSG_NMEA_USB: 0
